---
date: 2024-11-11
category:
  - CategoryC
tag:
  - tag E
sticky: 20
---

# 后台管理项目
基于elementui、vue3的后台管理项目
<!-- more -->
## 前端架构设计

### 2-8 axios二次封装（下）
构造好request的封装函数后在main.js里进行全局挂载之后才能在组件进行全局使用
```js
import request from './uitils/request';
app.config.globalProperties.$request = request
```
>在js里request和request()是不同的，request是将request函数本身赋值给app.config.globalProperties.$request
如果说是request()则是先执行request然后将返回值赋值给app.config.globalProperties.$request

封装完成后，就能在组件里面调用了
```js
  mounted() {
    this.$request({
      method:'get',
      url:'/login',
      data:{
        name:'jack'
      }
    }).then((res)=>{
       console.log("res=",res);
    })
  }
```

为了更加方便的进行调用，我们还可以把request函数转换成一个对象，这个对象里有各种请求的方法  

request.js
```js
['get', 'post', 'put', 'delete', 'patch'].forEach((item) => {
    request[item] = (url, data, options) => {//options可以对请求的参数做一些额外的拓展，比如可以传mock:true,或者loading之类的东西
        return request({
            url,
            data,
            method: item,
            ...options
        })
    }
})
```
>1. 这个地方非常巧妙地把函数request转换为对象request，并且把多个属性添加到request对象里，属性的值是函数
>2. options可以对请求的参数做一些额外的拓展，比如可以传mock:true,或者loading:true之类的东西

login.vue
```js
  mounted() {
    this.$request.get('/login',{name:'jack'}).then((res)=>{
      console.log(res);
    })
  }
```

### 2-9 storage二次封装

